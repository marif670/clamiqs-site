<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calmiqs Blog Editor</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#4FA49A",
              accent: "#FFD580",
              tech: "#5A67D8",
            },
            fontFamily: {
              sans: ["Poppins", "sans-serif"],
            },
          },
        },
      };
    </script>

    <link rel="stylesheet" href="/assets/css/style.css?v=14" />
  </head>

  <body class="font-sans bg-[#F9FAFB] text-gray-800">
    <!-- üåø Login Overlay -->
    <div
      id="loginScreen"
      class="fixed inset-0 flex flex-col justify-center items-center bg-white z-50"
    >
      <h1 class="text-3xl font-bold text-primary mb-6">Calmiqs Admin</h1>
      <div class="bg-gray-50 border border-gray-200 p-6 rounded-xl shadow-md w-80">
        <label class="block mb-2 font-medium text-gray-700">Enter Admin Password</label>
        <input
          type="password"
          id="passwordInput"
          class="w-full border border-gray-300 p-2 rounded-lg mb-4"
          placeholder="********"
        />
        <button
          onclick="checkPassword()"
          class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-tech transition w-full"
        >
          Login
        </button>
        <p id="errorMsg" class="text-red-500 text-sm mt-3 hidden">Incorrect password. Try again.</p>
      </div>
    </div>

    <!-- üåø Header -->
    <header class="bg-white shadow-sm sticky top-0 z-40">
      <div class="max-w-6xl mx-auto flex justify-between items-center p-4">
        <h1 class="text-2xl font-bold text-primary"><a href="index.html">Calmiqs</a></h1>
        <nav>
          <ul class="flex gap-6 text-gray-700">
            <li><a href="index.html" class="hover:text-primary">Home</a></li>
            <li><a href="blog.html" class="hover:text-primary">Blog</a></li>
            <li><a href="tools.html" class="hover:text-primary">Tools</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- ‚úçÔ∏è Blog Editor -->
    <main id="editorPanel" class="max-w-7xl mx-auto grid md:grid-cols-2 gap-8 p-8 hidden">
      <!-- Left: Editor -->
      <section class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
        <h2 class="text-2xl font-semibold mb-4 text-primary">üìù Blog Post Editor</h2>

        <form id="blogForm" class="space-y-4">
          <div>
            <label class="block font-medium mb-1">Title</label>
            <input
              type="text"
              id="title"
              class="w-full border border-gray-300 p-2 rounded-lg"
              placeholder="Enter blog title"
              required
            />
          </div>

          <div>
            <label class="block font-medium mb-1">Slug (unique URL)</label>
            <input
              type="text"
              id="slug"
              class="w-full border border-gray-300 p-2 rounded-lg"
              placeholder="e.g., mindful-living-tips"
              required
            />
          </div>

          <div>
            <label class="block font-medium mb-1">Category</label>
            <input
              type="text"
              id="category"
              class="w-full border border-gray-300 p-2 rounded-lg"
              placeholder="Wellness / Mindfulness"
            />
          </div>

          <div>
            <label class="block font-medium mb-1">Date</label>
            <input
              type="date"
              id="date"
              class="w-full border border-gray-300 p-2 rounded-lg"
              required
            />
          </div>

          <div>
            <label class="block font-medium mb-1">Image URL</label>
            <input
              type="text"
              id="image"
              class="w-full border border-gray-300 p-2 rounded-lg"
              placeholder="/assets/img/sample.jpg"
            />
          </div>

          <div>
            <label class="block font-medium mb-1">Content</label>
            <textarea
              id="content"
              rows="8"
              class="w-full border border-gray-300 p-2 rounded-lg"
              placeholder="Write your article content..."
              required
            ></textarea>
          </div>

          <button
            type="submit"
            class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-tech transition"
          >
            Save Blog Post
          </button>
        </form>
      </section>

      <!-- Right: Live Preview -->
      <section class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200 overflow-y-auto">
        <h2 class="text-2xl font-semibold mb-4 text-primary">üëÅÔ∏è Live Preview</h2>
        <div id="preview" class="prose max-w-none text-gray-700">
          <p class="italic text-gray-400">Start typing to see your live preview...</p>
        </div>
      </section>
    </main>

    <!-- üìú Scripts -->
    <script>
      // üß© Simple password protection
      const ADMIN_PASSWORD = "calmiqsadmin"; // <-- change this as needed

      function checkPassword() {
        const input = document.getElementById("passwordInput").value.trim();
        const errorMsg = document.getElementById("errorMsg");

        if (input === ADMIN_PASSWORD) {
          document.getElementById("loginScreen").classList.add("hidden");
          document.getElementById("editorPanel").classList.remove("hidden");
        } else {
          errorMsg.classList.remove("hidden");
        }
      }

      // ü™∂ Live Preview
      const form = document.getElementById("blogForm");
      const preview = document.getElementById("preview");
      const fields = ["title", "slug", "category", "date", "image", "content"];
      fields.forEach((id) => {
        document.getElementById(id).addEventListener("input", updatePreview);
      });

      function updatePreview() {
        const title = document.getElementById("title").value || "Untitled Post";
        const category = document.getElementById("category").value || "General";
        const date =
          document.getElementById("date").value || new Date().toISOString().split("T")[0];
        const image = document.getElementById("image").value;
        const content = document.getElementById("content").value || "Start writing your content...";

        preview.innerHTML = `
          <article>
            ${image ? `<img src="${image}" alt="${title}" class="rounded-xl mb-4 shadow-md">` : ""}
            <h1 class="text-3xl font-bold mb-2">${title}</h1>
            <div class="text-sm text-gray-500 mb-6">${category} ‚Ä¢ ${date}</div>
            <div class="space-y-4">${convertToHTML(content)}</div>
          </article>
        `;
      }

      // Simple markdown-like converter
      function convertToHTML(text) {
        return text
          .replace(/^### (.*$)/gim, "<h3 class='text-xl font-semibold mt-4'>$1</h3>")
          .replace(/^## (.*$)/gim, "<h2 class='text-2xl font-bold mt-6'>$1</h2>")
          .replace(/^# (.*$)/gim, "<h1 class='text-3xl font-bold mt-6'>$1</h1>")
          .replace(/\*\*(.*?)\*\*/gim, "<strong>$1</strong>")
          .replace(/\*(.*?)\*/gim, "<em>$1</em>")
          .replace(/`(.*?)`/gim, "<code class='bg-gray-100 px-1 rounded'>$1</code>")
          .replace(/\n$/gim, "<br />");
      }

      // Save handler (mock for now)
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        alert("‚úÖ Blog post saved (mock mode). Integration with JSON file will be added next.");
      });
    </script>
  </body>
</html>
